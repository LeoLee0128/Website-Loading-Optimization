<div class="perf-opt container">
  {%- paginate customer.addresses by 16 -%}
    {%- if customer.addresses_count == 0 -%}
      <div class="perf-opt empty-state">
        <div class="perf-opt empty-state__icon-wrapper">
          {%- render 'icon' with 'picto-pin', width: 32, height: 32, stroke_width: 1 -%}
          <span class="perf-opt count-bubble count-bubble--lg">0</span>
        </div>

        <div class="perf-opt prose">
          <p class="perf-opt h6">{{ 'customer.addresses.no_addresses' | t }}</p>

          {%- assign button_content = 'customer.addresses.add_address' | t -%}
          {%- render 'button', size: 'xl', content: button_content, aria_controls: 'customer-address-new' -%}
        </div>
      </div>
    {%- else -%}
      <div class="perf-opt page-spacer">
        <div class="perf-opt account">
          <div class="perf-opt account-header">
            <div class="perf-opt text-with-bubble justify-self-center">
              <h1 class="perf-opt h3">{{ 'customer.account.addresses' | t }}</h1>
              <span class="perf-opt count-bubble count-bubble--lg">{{ customer.addresses_count }}</span>
            </div>
          </div>

          <div class="perf-opt v-stack gap-6 sm:gap-12">
            <div class="perf-opt addresses-list">
              {%- for address in customer.addresses -%}
                <div class="perf-opt address rounded-sm">
                  {%- if address == customer.default_address -%}
                    <p class="perf-opt bold">{{ 'customer.addresses.default_address' | t }}</p>
                  {%- else -%}
                    <p class="perf-opt bold">{{ 'customer.addresses.address_title' | t: position: forloop.index }}</p>
                  {%- endif -%}

                  {{- address | format_address -}}

                  <div class="perf-opt address__actions">
                    <button type="button" aria-controls="customer-address-{{ address.id }}" aria-expanded="false">
                      <span class="perf-opt link text-sm text-subdued">{{ 'customer.addresses.edit' | t }}</span>
                    </button>

                    <form method="post" action="{{ address.url }}">
                      <input type="hidden" name="_method" value="delete">
                      <button is="confirm-button" data-message="{{ 'customer.addresses.delete_confirm' | t | escape }}">
                        <span class="perf-opt link text-sm text-subdued">{{ 'customer.addresses.delete' | t }}</span>
                      </button>
                    </form>
                  </div>
                </div>
              {%- endfor -%}
            </div>

            {%- render 'pagination', paginate: paginate -%}

            <div class="perf-opt justify-self-center">
              {%- assign button_content = 'customer.addresses.add_address' | t -%}
              {%- render 'button', size: 'xl', content: button_content, aria_controls: 'customer-address-new' -%}
            </div>
          </div>
        </div>
      </div>
    {%- endif -%}

    {%- render 'address-form', address: customer.new_address -%}

    {%- for address in customer.addresses -%}
      {%- render 'address-form', address: address -%}
    {%- endfor -%}
  {%- endpaginate -%}
</div>

<div class="perf-opt article">

</div>

{% schema %}
{
  "name": "Customer addresses",
  "class": "shopify-section--main-customers-addresses",
  "tag": "section"
}
{% endschema %}